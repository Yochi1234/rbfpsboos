-- [[ FPS Boost GUI Script with Toggle Button ]] --

local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer

-- สร้าง ScreenGui หลัก
local screenGui = Instance.new("ScreenGui", LocalPlayer:WaitForChild("PlayerGui"))
screenGui.Name = "FPSBoostGui"
screenGui.ResetOnSpawn = false

-- [[ ปุ่ม Toggle GUI ]] --
local toggleButton = Instance.new("TextButton", screenGui)
toggleButton.Size = UDim2.new(0, 100, 0, 30)
toggleButton.Position = UDim2.new(0, 10, 0, 10)
toggleButton.Text = "Show FPS Boost"
toggleButton.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
toggleButton.TextColor3 = Color3.new(1, 1, 1)
toggleButton.Font = Enum.Font.GothamBold
toggleButton.TextSize = 14
toggleButton.BorderSizePixel = 0

-- [[ GUI หลักของ FPS Boost ]] --
local frame = Instance.new("Frame")
frame.Parent = screenGui
frame.Size = UDim2.new(0, 200, 0, 160)
frame.Position = UDim2.new(0, 20, 0, 50)
frame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
frame.BorderSizePixel = 0
frame.Visible = false
frame.Active = true
frame.Draggable = true

local title = Instance.new("TextLabel", frame)
title.Text = "FPS Boost Level"
title.Size = UDim2.new(1, 0, 0, 30)
title.BackgroundTransparency = 1
title.TextColor3 = Color3.new(1, 1, 1)
title.Font = Enum.Font.GothamBold
title.TextSize = 18

-- [[ ปุ่มเลือกระดับการลบ ]] --
local levels = {"Low", "Mid", "High"}
local buttons = {}
local selectedLevel = "Low"

for i, level in ipairs(levels) do
    local button = Instance.new("TextButton", frame)
    button.Size = UDim2.new(1, -20, 0, 30)
    button.Position = UDim2.new(0, 10, 0, 30 + (i - 1) * 35)
    button.Text = level
    button.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
    button.TextColor3 = Color3.new(1, 1, 1)
    button.Font = Enum.Font.Gotham
    button.TextSize = 16

    buttons[level] = button

    button.MouseButton1Click:Connect(function()
        selectedLevel = level
        updateParticles() -- ลบตามระดับใหม่
    end)
end

-- [[ ฟังก์ชันลบ Particle และสิ่งฟุ่มเฟือย ]] --
local function shouldRemove(instance)
    if instance:IsA("ParticleEmitter") or instance:IsA("Trail") or instance:IsA("Smoke") or instance:IsA("Fire") then
        if selectedLevel == "Low" then
            return instance.Lifetime.Max > 2
        elseif selectedLevel == "Mid" then
            return true
        elseif selectedLevel == "High" then
            return true
        end
    elseif selectedLevel == "High" then
        if instance:IsA("Explosion") or instance:IsA("Sparkles") or instance:IsA("Beam") or
           instance:IsA("Decal") or instance:IsA("SurfaceGui") or
           instance:IsA("PointLight") or instance:IsA("SpotLight") or instance:IsA("SurfaceLight") then
            return true
        end
    end
    return false
end

local function cleanParticles(parent)
    for _, obj in ipairs(parent:GetDescendants()) do
        -- ตรวจจับและลบโดยตรง
        if shouldRemove(obj) then
            pcall(function() obj:Destroy() end)
        end

        -- ในระดับ High: ล้าง Particle/Effect ที่อยู่ใน BasePart โดยตรง
        if selectedLevel == "High" and obj:IsA("BasePart") then
            for _, child in ipairs(obj:GetChildren()) do
                if child:IsA("ParticleEmitter") or child:IsA("Smoke") or child:IsA("Fire") or child:IsA("Sparkles") or
                   child:IsA("Decal") or child:IsA("SurfaceGui") or
                   child:IsA("PointLight") or child:IsA("SpotLight") or child:IsA("SurfaceLight") then
                    pcall(function() child:Destroy() end)
                end
            end
        end
    end
end

local function cleanCharacterParticles()
    local char = LocalPlayer.Character
    if char then
        cleanParticles(char)
    end
end

function updateParticles()
    cleanParticles(game.Workspace)
    cleanCharacterParticles()
end

-- [[ ปุ่ม Toggle แสดง/ซ่อน GUI ]] --
toggleButton.MouseButton1Click:Connect(function()
    frame.Visible = not frame.Visible
    toggleButton.Text = frame.Visible and "Hide FPS Boost" or "Show FPS Boost"
end)

-- [[ ลบ Particle ทุก ๆ 10 วิ ตามระดับที่เลือก ]] --
while true do
    task.wait(10)
    updateParticles()
end
